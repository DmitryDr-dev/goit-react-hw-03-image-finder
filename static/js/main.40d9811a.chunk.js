(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{17:function(e,t,a){},20:function(e,t,a){"use strict";a.r(t);var r=a(1),n=a.n(r),c=a(11),s=a.n(c),i=(a(17),a(2)),o=a(3),u=a(5),l=a(4),h=a(6),m=a(0),g=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).handleInputChange=function(t){e.setState({query:t.currentTarget.value})},e.handleFormSubmit=function(t){t.preventDefault();var a=Object(h.a)(e),r=a.state.query,n=a.props,c=a.clearState;if(""===r.trim())return alert("Please enter the search query!");n.onSubmit(r),c()},e.clearState=function(){e.setState({query:""})},e.state={query:""},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this.state.query,t=this.handleInputChange,a=this.handleFormSubmit;return Object(m.jsx)("header",{className:"Searchbar",children:Object(m.jsxs)("form",{className:"SearchForm",onSubmit:a,children:[Object(m.jsx)("button",{type:"submit",className:"SearchForm-button",children:Object(m.jsx)("span",{className:"SearchForm-button-label",children:"Search"})}),Object(m.jsx)("input",{className:"SearchForm-input",type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",value:e,onChange:t})]})})}}]),a}(r.Component),d=a(8),b=a.n(d),j=a(12),f=a(9),p=a(10),y=Object(p.a)("BASE_URL"),v=Object(p.a)("API_KEY"),O=function(){function e(){Object(i.a)(this,e),Object.defineProperty(this,y,{writable:!0,value:"https://pixabay.com/api/?"}),Object.defineProperty(this,v,{writable:!0,value:"23203162-5bd4fce9443c3feba1bdcfdd5"}),this.searchQuery="",this.pageNumber=1,this.qtyPerPage=12}return Object(o.a)(e,[{key:"query",get:function(){return this.searchQuery},set:function(e){this.searchQuery=e}},{key:"fetchImages",value:function(){var e=Object(j.a)(b.a.mark((function e(){var t,a,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(Object(f.a)(this,y)[y],"q=").concat(this.searchQuery,"&page=").concat(this.pageNumber,"&key=").concat(Object(f.a)(this,v)[v],"&image_type=photo&orientation=horizontal&per_page=").concat(this.qtyPerPage),e.prev=1,e.next=4,fetch(t);case 4:return a=e.sent,e.next=7,a.json();case 7:return r=e.sent,e.abrupt("return",r);case 11:e.prev=11,e.t0=e.catch(1),console.log("Something's wrong",null===e.t0||void 0===e.t0?void 0:e.t0.message);case 14:case"end":return e.stop()}}),e,this,[[1,11]])})));return function(){return e.apply(this,arguments)}}()}]),e}();var S=function(e){var t=e.smallImageUrl,a=e.largeImageUrl,r=e.imgDescription,n=e.onImageClick;return Object(m.jsx)("img",{src:t,alt:r,className:"ImageGalleryItem-image",onClick:n,"data-source":a})},x=new O,I="idle",w="pending",k="resolved",q="rejected",N=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).imageClickHandler=function(t){var a=t.target,r=a.dataset.source,n=a.alt;e.setState({largeImageUrl:r,imageAlt:n}),e.toggleModal()},e.fetchImages=function(){try{x.fetchImages().then((function(t){return e.setState({imageArray:t.hits,status:k})}))}catch(t){e.setState({status:q}),console.log("Okay, Houston, we've got a problem here",t.message)}},e.toggleModal=function(){e.setState((function(e){return{showModal:!e.showModal}}))},e.state={imageArray:[],status:I,showModal:!1,largeImageUrl:"",imageAlt:""},e}return Object(o.a)(a,[{key:"componentDidUpdate",value:function(e){var t,a=null===e||void 0===e?void 0:e.query,r=null===(t=this.props)||void 0===t?void 0:t.query;if(a!==r){this.setState({status:w});try{x.query=r,this.fetchImages()}catch(n){this.setState({status:q}),console.log("Okay, Houston, we've got a problem here",n.message)}}}},{key:"render",value:function(){var e=this.state,t=e.imageArray,a=e.status,r=(e.showModal,e.imageAlt,e.largeImageUrl,this.imageClickHandler);switch(a){case"idle":return Object(m.jsx)("div",{className:"",children:"Enter smth"});case"pending":return Object(m.jsx)("div",{className:"",children:"Wait"});case"resolved":return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)("ul",{className:"ImageGallery",children:t.map((function(e){var t=e.id,a=e.largeImageURL,n=e.webformatURL,c=e.tags;return Object(m.jsx)("li",{className:"ImageGalleryItem",children:Object(m.jsx)(S,{largeImageUrl:a,smallImageUrl:n,imgDescription:c,onImageClick:r})},t)}))})});case"rejected":return Object(m.jsx)("div",{className:"",children:"Ooops"});default:return}}}]),a}(r.Component),C=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).formSubmitHandler=function(t){e.setState({searchQuery:t})},e.state={searchQuery:""},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this.state.searchQuery,t=this.formSubmitHandler;return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(g,{onSubmit:t}),Object(m.jsx)(N,{query:e})]})}}]),a}(r.Component);s.a.render(Object(m.jsx)(n.a.StrictMode,{children:Object(m.jsx)(C,{})}),document.getElementById("root"))}},[[20,1,2]]]);
//# sourceMappingURL=main.40d9811a.chunk.js.map