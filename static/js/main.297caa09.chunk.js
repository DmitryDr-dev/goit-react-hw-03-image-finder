(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{17:function(e,t,a){},20:function(e,t,a){"use strict";a.r(t);var r=a(1),n=a.n(r),c=a(6),s=a.n(c),o=(a(17),a(2)),i=a(3),l=a(5),u=a(4),h=a(7),m=a(0),d=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).handleInputChange=function(t){e.setState({query:t.currentTarget.value})},e.handleFormSubmit=function(t){t.preventDefault();var a=Object(h.a)(e),r=a.state.query,n=a.props,c=a.clearState;if(""===r.trim())return alert("Please enter the search query!");n.onSubmit(r),c()},e.clearState=function(){e.setState({query:""})},e.state={query:""},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this.state.query,t=this.handleInputChange,a=this.handleFormSubmit;return Object(m.jsx)("header",{className:"Searchbar",children:Object(m.jsxs)("form",{className:"SearchForm",onSubmit:a,children:[Object(m.jsx)("button",{type:"submit",className:"SearchForm-button",children:Object(m.jsx)("span",{className:"SearchForm-button-label",children:"Search"})}),Object(m.jsx)("input",{className:"SearchForm-input",type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",value:e,onChange:t})]})})}}]),a}(r.Component),b=a(9),g=a.n(b),j=a(12),p=a(10),f=a(11),v=Object(f.a)("BASE_URL"),y=Object(f.a)("API_KEY"),O=function(){function e(){Object(o.a)(this,e),Object.defineProperty(this,v,{writable:!0,value:"https://pixabay.com/api/?"}),Object.defineProperty(this,y,{writable:!0,value:"23203162-5bd4fce9443c3feba1bdcfdd5"}),this.searchQuery="",this.pageNumber=1,this.qtyPerPage=12}return Object(i.a)(e,[{key:"query",get:function(){return this.searchQuery},set:function(e){this.searchQuery=e}},{key:"fetchImages",value:function(){var e=Object(j.a)(g.a.mark((function e(){var t,a,r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(Object(p.a)(this,v)[v],"q=").concat(this.searchQuery,"&page=").concat(this.pageNumber,"&key=").concat(Object(p.a)(this,y)[y],"&image_type=photo&orientation=horizontal&per_page=").concat(this.qtyPerPage),e.prev=1,e.next=4,fetch(t);case 4:return a=e.sent,e.next=7,a.json();case 7:return r=e.sent,e.abrupt("return",r);case 11:e.prev=11,e.t0=e.catch(1),console.log("Something's wrong",null===e.t0||void 0===e.t0?void 0:e.t0.message);case 14:case"end":return e.stop()}}),e,this,[[1,11]])})));return function(){return e.apply(this,arguments)}}()}]),e}();var k=function(e){var t=e.smallImageUrl,a=e.largeImageUrl,r=e.imgDescription,n=e.onImageClick;return Object(m.jsx)("img",{src:t,alt:r,className:"ImageGalleryItem-image",onClick:function(){n(a,r)},"data-source":a})},S=document.querySelector("#modal-root"),x=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).keyboardManipulation=function(t){console.log(t);var a=e.props.onClose;"Escape"===t.code&&a()},e.handleBackdropClick=function(t){t.target===t.currentTarget&&e.props.onClose()},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.keyboardManipulation)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.keyboardManipulation)}},{key:"render",value:function(){var e=this.props,t=e.url,a=e.alt;return Object(c.createPortal)(Object(m.jsx)("div",{className:"Overlay",onClick:this.handleBackdropClick,children:Object(m.jsx)("div",{className:"Modal",children:Object(m.jsx)("img",{src:t,alt:a})})}),S)}}]),a}(r.Component),w=x,I=new O,C="idle",q="pending",N="resolved",M="rejected",U=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).imageClickHandler=function(t,a){e.setState({largeImageUrl:t,imageAlt:a}),e.toggleModal()},e.fetchImages=function(){try{I.fetchImages().then((function(t){return e.setState({imageArray:t.hits,status:N})}))}catch(t){e.setState({status:M}),console.log("Okay, Houston, we've got a problem here",t.message)}},e.toggleModal=function(){e.setState((function(e){return{showModal:!e.showModal}}))},e.state={imageArray:[],status:C,showModal:!1,largeImageUrl:"",imageAlt:""},e}return Object(i.a)(a,[{key:"componentDidUpdate",value:function(e){var t,a=null===e||void 0===e?void 0:e.query,r=null===(t=this.props)||void 0===t?void 0:t.query;if(a!==r){this.setState({status:q});try{I.query=r,this.fetchImages()}catch(n){this.setState({status:M}),console.log("Okay, Houston, we've got a problem here",n.message)}}}},{key:"render",value:function(){var e=this.state,t=e.imageArray,a=e.status,r=e.showModal,n=e.imageAlt,c=e.largeImageUrl,s=this.imageClickHandler,o=this.toggleModal;switch(a){case"idle":return Object(m.jsx)("div",{className:"",children:"Enter smth"});case"pending":return Object(m.jsx)("div",{className:"",children:"Wait"});case"resolved":return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("ul",{className:"ImageGallery",children:t.map((function(e){var t=e.id,a=e.largeImageURL,r=e.webformatURL,n=e.tags;return Object(m.jsx)("li",{className:"ImageGalleryItem",children:Object(m.jsx)(k,{largeImageUrl:a,smallImageUrl:r,imgDescription:n,onImageClick:s})},t)}))}),r&&Object(m.jsx)(w,{alt:n,url:c,onClose:o})]});case"rejected":return Object(m.jsx)("div",{className:"",children:"Ooops"});default:return}}}]),a}(r.Component),A=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).formSubmitHandler=function(t){e.setState({searchQuery:t})},e.state={searchQuery:""},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this.state.searchQuery,t=this.formSubmitHandler;return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(d,{onSubmit:t}),Object(m.jsx)(U,{query:e})]})}}]),a}(r.Component);s.a.render(Object(m.jsx)(n.a.StrictMode,{children:Object(m.jsx)(A,{})}),document.getElementById("root"))}},[[20,1,2]]]);
//# sourceMappingURL=main.297caa09.chunk.js.map