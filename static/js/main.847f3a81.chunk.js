(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{21:function(e,t,a){},23:function(e,t,a){},24:function(e,t,a){},26:function(e,t,a){},28:function(e,t,a){},29:function(e,t,a){},30:function(e,t,a){},52:function(e,t,a){},53:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),o=a(8),c=a.n(o),s=(a(21),a(3)),i=a(4),l=a(6),u=a(5),h=a(7),g=(a(22),a(23),a(9)),m=(a(24),a(1)),d=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).handleInputChange=function(t){e.setState({query:t.currentTarget.value})},e.handleFormSubmit=function(t){t.preventDefault();var a=Object(g.a)(e),r=a.state.query,n=a.props,o=a.clearState;if(""===r.trim())return h.b.error("Please enter the search query!");n.onSubmit(r),o()},e.clearState=function(){e.setState({query:""})},e.state={query:""},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this.state.query,t=this.handleInputChange,a=this.handleFormSubmit;return Object(m.jsx)("header",{className:"Searchbar",children:Object(m.jsxs)("form",{className:"SearchForm",onSubmit:a,children:[Object(m.jsx)("button",{type:"submit",className:"SearchForm-button",children:Object(m.jsx)("span",{className:"SearchForm-button-label",children:"Search"})}),Object(m.jsx)("input",{className:"SearchForm-input",type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",value:e,onChange:t})]})})}}]),a}(r.Component),b=a(14),p=(a(26),a(11)),j=a.n(p),f=a(15),v=a(12),y=a(13),O=Object(y.a)("BASE_URL"),k=Object(y.a)("API_KEY"),w=function(){function e(){Object(s.a)(this,e),Object.defineProperty(this,O,{writable:!0,value:"https://pixabay.com/api/?"}),Object.defineProperty(this,k,{writable:!0,value:"23203162-5bd4fce9443c3feba1bdcfdd5"}),this.searchQuery="",this.pageNumber=1,this.qtyPerPage=12}return Object(i.a)(e,[{key:"query",get:function(){return this.searchQuery},set:function(e){this.searchQuery=e}},{key:"page",get:function(){return this.pageNumber},set:function(e){this.pageNumber=e}},{key:"fetchImages",value:function(){var e=Object(f.a)(j.a.mark((function e(){var t,a,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(Object(v.a)(this,O)[O],"q=").concat(this.searchQuery,"&page=").concat(this.pageNumber,"&key=").concat(Object(v.a)(this,k)[k],"&image_type=photo&orientation=horizontal&per_page=").concat(this.qtyPerPage),e.prev=1,e.next=4,fetch(t);case 4:return a=e.sent,e.next=7,a.json();case 7:return r=e.sent,e.abrupt("return",r);case 11:e.prev=11,e.t0=e.catch(1),console.log("Something's wrong",null===e.t0||void 0===e.t0?void 0:e.t0.message);case 14:case"end":return e.stop()}}),e,this,[[1,11]])})));return function(){return e.apply(this,arguments)}}()}]),e}();a(28);var S=function(e){var t=e.smallImageUrl,a=e.largeImageUrl,r=e.imgDescription,n=e.onImageClick;return Object(m.jsx)("img",{src:t,alt:r,className:"ImageGalleryItem-image",onClick:function(){n(a,r)},"data-source":a})},I=(a(29),document.querySelector("#modal-root")),x=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var r,n,o;return Object(s.a)(this,a),(o=t.call(this,e)).keyboardManipulation=function(e){var t=o.props,a=t.onClose,r=t.imgArr,n=r.findIndex((function(e){return(null===e||void 0===e?void 0:e.largeImageURL)===o.state.url}));switch(e.code){case"Escape":a();break;case n===r.length-1&&"ArrowRight":n=0,o.changeImage(n);break;case n<r.length-1&&"ArrowRight":n+=1,o.changeImage(n);break;case 0===n&&"ArrowLeft":n=r.length-1,o.changeImage(n);break;case n>0&&"ArrowLeft":n-=1,o.changeImage(n);break;default:return}},o.handleBackdropClick=function(e){e.target===e.currentTarget&&o.props.onClose()},o.state={url:null===(r=o.props)||void 0===r?void 0:r.url,alt:null===(n=o.props)||void 0===n?void 0:n.alt},o}return Object(i.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.keyboardManipulation)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.keyboardManipulation)}},{key:"changeImage",value:function(e){this.setState({url:this.props.imgArr[e].largeImageURL,alt:this.props.imgArr[e].tags})}},{key:"render",value:function(){var e=this.state,t=e.url,a=e.alt;return Object(o.createPortal)(Object(m.jsx)("div",{className:"Overlay",onClick:this.handleBackdropClick,children:Object(m.jsx)("div",{className:"Modal",children:Object(m.jsx)("img",{src:t,alt:a})})}),I)}}]),a}(r.Component);a(30);var C=function(e){var t=e.onClick;return Object(m.jsx)("button",{className:"Button",type:"button",onClick:t,children:"Load More"})},A=a(16),N=a.n(A),q=(a(51),a(52),function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return Object(m.jsx)(N.a,{type:"Bars",color:"#00BFFF",height:100,width:100,timeout:3e3})}}]),a}(r.Component)),M=new w,U="idle",F="pending",H="resolved",P="rejected",B=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).imageClickHandler=function(t,a){e.setState({largeImageUrl:t,imageAlt:a}),e.toggleModal()},e.renderImages=function(){try{M.fetchImages().then((function(t){0!==t.hits.length?(e.setState((function(e){return{imageArray:[].concat(Object(b.a)(e.imageArray),Object(b.a)(t.hits)),status:H}})),e.smoothScrolling()):h.b.error("Nothing found! Please enter the correct query!")}))}catch(t){e.setState({status:P}),console.log("Okay, Houston, we've got a problem here",t.message)}},e.toggleModal=function(){e.setState((function(e){return{showModal:!e.showModal}}))},e.loadMoreBtnClickHandler=function(){try{M.page+=1,e.renderImages()}catch(t){e.setState({status:P}),console.log("Okay, Houston, we've got a problem here:",t.message)}},e.state={imageArray:[],status:U,showModal:!1,largeImageUrl:"",imageAlt:""},e}return Object(i.a)(a,[{key:"componentDidUpdate",value:function(e){var t,a=null===e||void 0===e?void 0:e.query,r=null===(t=this.props)||void 0===t?void 0:t.query;if(a!==r){this.setState({status:F});try{M.page=1,M.query=r,this.setState({imageArray:[]}),this.renderImages()}catch(n){this.setState({status:P}),console.log("Okay, Houston, we've got a problem here",n.message)}}}},{key:"smoothScrolling",value:function(){window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})}},{key:"render",value:function(){var e=this.state,t=e.imageArray,a=e.status,r=e.showModal,n=e.imageAlt,o=e.largeImageUrl,c=this.imageClickHandler,s=this.toggleModal,i=this.loadMoreBtnClickHandler;switch(a){case"idle":return null;case"pending":return Object(m.jsx)(q,{});case"resolved":return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("ul",{className:"ImageGallery",children:t.map((function(e){var t=e.id,a=e.largeImageURL,r=e.webformatURL,n=e.tags;return Object(m.jsx)("li",{className:"ImageGalleryItem",children:Object(m.jsx)(S,{largeImageUrl:a,smallImageUrl:r,imgDescription:n,onImageClick:c})},t)}))}),r&&Object(m.jsx)(x,{alt:n,url:o,onClose:s,imgArr:t}),0!==t.length&&Object(m.jsx)("div",{className:"Button-wrap",children:Object(m.jsx)(C,{onClick:i})})]});case"rejected":return h.b.error("Okay, Houston, we've got a problem here. Please try again later");default:return}}}]),a}(r.Component),L=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).formSubmitHandler=function(t){e.setState({searchQuery:t})},e.state={searchQuery:""},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this.state.searchQuery,t=this.formSubmitHandler;return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(d,{onSubmit:t}),Object(m.jsx)(B,{query:e}),Object(m.jsx)(h.a,{autoClose:3e3,position:"top-right"})]})}}]),a}(r.Component);c.a.render(Object(m.jsx)(n.a.StrictMode,{children:Object(m.jsx)(L,{})}),document.getElementById("root"))}},[[53,1,2]]]);
//# sourceMappingURL=main.847f3a81.chunk.js.map